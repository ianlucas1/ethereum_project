name: Nightly Full Quality Audit
on:
  schedule:
    - cron: '0 2 * * *'   # 02:00 UTC daily
jobs:
  audit:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup Python
        uses: actions/setup-python@v5
        with: {python-version: '3.12'}
      - name: Install dev deps
        run: |
          python -m pip install -r requirements-dev.txt
      - name: Full baseline audit
        run: python scripts/qa_audit.py --mode=full
      - name: Commit scoreboard row
        run: |
          git config user.name "ci-bot"
          git config user.email "actions@github.com"
          git add prompts/quality_scoreboard.md quality_scoreboard.json .qa_audit_cache
          git commit -m "chore(ci): nightly full audit" || echo "No changes"
          git push || echo "Nothing to push"
